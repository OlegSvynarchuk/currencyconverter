{"ast":null,"code":"import _slicedToArray from\"/home/olegsvyn/projects/converter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ConverterCurrencyPair(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),amount=_useState2[0],setAmount=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),inputName=_useState4[0],setInputName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),from=_useState6[0],setFromCurrency=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),to=_useState8[0],setToCurrency=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),result=_useState10[0],setResult=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),backendError=_useState12[0],setBackendError=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),inputError=_useState14[0],setInputError=_useState14[1];function validateInput(input){var reg=new RegExp(/^\\d*(\\.)?(\\d{0,2})?$/);return reg.test(input);}function handleCurrencyInput(e){setAmount(e.target.value);setInputName(e.target.name);if(!validateInput(e.target.value)){setInputError('numbers only please');}else{setInputError(null);}}function handleFromCurrency(e){setFromCurrency(e.target.value);}function handleToCurrency(e){setToCurrency(e.target.value);}function handleRateRequest(){var amount=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var from=arguments.length>1?arguments[1]:undefined;var to=arguments.length>2?arguments[2]:undefined;var url=inputName==='left'?\"https://api.getgeoapi.com/v2/currency/convert?api_key=77eed905a93a78d05adb55ce7db36955d7be8453&from=\".concat(from,\"&to=\").concat(to,\"&amount=\").concat(amount):\"https://api.getgeoapi.com/v2/currency/convert?api_key=77eed905a93a78d05adb55ce7db36955d7be8453&from=\".concat(to,\"&to=\").concat(from,\"&amount=\").concat(amount);axios.get(url).then(function(res){return setResult(res.data.rates[Object.keys(res.data.rates)[0]].rate_for_amount);}).catch(function(err){return setBackendError(err);});}useEffect(function(){if(!inputError&&amount&&from&&to){handleRateRequest(amount,from,to);}else{setResult('');}},[amount,from,to]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"converter\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"amount-input\",autocomplete:\"off\",type:\"text\",name:\"left\",value:inputName==='left'?amount:result,onChange:handleCurrencyInput}),/*#__PURE__*/_jsxs(\"select\",{name:\"left\",className:\"currency-select\",id:\"left\",onChange:handleFromCurrency,children:[/*#__PURE__*/_jsxs(\"option\",{selected:true,value:\"\",disabled:true,children:[' ',\"-- select currency --\",' ']}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",children:\"USD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",children:\"EUR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"UAH\",children:\"UAH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RON\",children:\"RON\"})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"right\",className:\"currency-select\",id:\"right\",onChange:handleToCurrency,children:[/*#__PURE__*/_jsxs(\"option\",{selected:true,value:\"\",disabled:true,children:[' ',\"-- select currency --\",' ']}),/*#__PURE__*/_jsx(\"option\",{value:\"USD\",children:\"USD\"}),/*#__PURE__*/_jsx(\"option\",{value:\"EUR\",children:\"EUR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"UAH\",children:\"UAH\"}),/*#__PURE__*/_jsx(\"option\",{value:\"RON\",children:\"RON\"})]}),/*#__PURE__*/_jsx(\"input\",{className:\"amount-input\",autocomplete:\"off\",type:\"text\",name:\"right\",value:inputName==='right'?amount:result,onChange:handleCurrencyInput})]}),inputError&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:inputError}),backendError&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:backendError})]});}","map":{"version":3,"names":["axios","React","useEffect","useState","ConverterCurrencyPair","amount","setAmount","inputName","setInputName","from","setFromCurrency","to","setToCurrency","result","setResult","backendError","setBackendError","inputError","setInputError","validateInput","input","reg","RegExp","test","handleCurrencyInput","e","target","value","name","handleFromCurrency","handleToCurrency","handleRateRequest","url","get","then","res","data","rates","Object","keys","rate_for_amount","catch","err"],"sources":["/home/olegsvyn/projects/converter/src/components/converterCurrencyPair/index.jsx"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\n\nexport default function ConverterCurrencyPair() {\n  const [amount, setAmount] = useState(null);\n  const [inputName, setInputName] = useState('');\n  const [from, setFromCurrency] = useState('');\n  const [to, setToCurrency] = useState('');\n  const [result, setResult] = useState(null);\n  const [backendError, setBackendError] = useState(null);\n  const [inputError, setInputError] = useState(null);\n\n  function validateInput(input) {\n    const reg = new RegExp(/^\\d*(\\.)?(\\d{0,2})?$/);\n    return reg.test(input);\n  }\n\n  function handleCurrencyInput(e) {\n    setAmount(e.target.value);\n    setInputName(e.target.name);\n    if (!validateInput(e.target.value)) {\n      setInputError('numbers only please');\n    } else {\n      setInputError(null);\n    }\n  }\n\n  function handleFromCurrency(e) {\n    setFromCurrency(e.target.value);\n  }\n\n  function handleToCurrency(e) {\n    setToCurrency(e.target.value);\n  }\n\n  function handleRateRequest(amount = 0, from, to) {\n    const url =\n      inputName === 'left'\n        ? `https://api.getgeoapi.com/v2/currency/convert?api_key=77eed905a93a78d05adb55ce7db36955d7be8453&from=${from}&to=${to}&amount=${amount}`\n        : `https://api.getgeoapi.com/v2/currency/convert?api_key=77eed905a93a78d05adb55ce7db36955d7be8453&from=${to}&to=${from}&amount=${amount}`;\n    axios\n      .get(url)\n      .then((res) => setResult(res.data.rates[Object.keys(res.data.rates)[0]].rate_for_amount))\n      .catch((err) => setBackendError(err));\n  }\n\n  useEffect(() => {\n    if (!inputError && amount && from && to) {\n      handleRateRequest(amount, from, to);\n    } else {\n      setResult('');\n    }\n  }, [amount, from, to]);\n\n  return (\n    <>\n      <div className=\"converter\">\n        <input\n          className=\"amount-input\"\n          autocomplete=\"off\"\n          type=\"text\"\n          name=\"left\"\n          value={inputName === 'left' ? amount : result}\n          onChange={handleCurrencyInput}\n        />\n        <select name=\"left\" className=\"currency-select\" id=\"left\" onChange={handleFromCurrency}>\n          <option selected value=\"\" disabled>\n            {' '}\n            -- select currency --{' '}\n          </option>\n          <option value=\"USD\">USD</option>\n          <option value=\"EUR\">EUR</option>\n          <option value=\"UAH\">UAH</option>\n          <option value=\"RON\">RON</option>\n        </select>\n        <select name=\"right\" className=\"currency-select\" id=\"right\" onChange={handleToCurrency}>\n          <option selected value=\"\" disabled>\n            {' '}\n            -- select currency --{' '}\n          </option>\n          <option value=\"USD\">USD</option>\n          <option value=\"EUR\">EUR</option>\n          <option value=\"UAH\">UAH</option>\n          <option value=\"RON\">RON</option>\n        </select>\n        <input\n          className=\"amount-input\"\n          autocomplete=\"off\"\n          type=\"text\"\n          name=\"right\"\n          value={inputName === 'right' ? amount : result}\n          onChange={handleCurrencyInput}\n        ></input>\n      </div>\n      {inputError && <p className=\"error\">{inputError}</p>}\n      {backendError && <p className=\"error\">{backendError}</p>}\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}